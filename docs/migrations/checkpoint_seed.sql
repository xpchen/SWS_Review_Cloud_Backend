BEGIN;

-- 7类→checkpoint 种子数据（可重放）：先按code删除后插入
DELETE FROM sws.review_checkpoint WHERE code IN ('FMT_R_001', 'FMT_R_002', 'FMT_R_003', 'FMT_R_004', 'FMT_R_005', 'FMT_R_006', 'FMT_R_007', 'FMT_R_008', 'FMT_R_009', 'FMT_R_010', 'FMT_R_011', 'FMT_R_012', 'FMT_AI_001', 'FMT_AI_002', 'FMT_AI_003', 'FMT_AI_004', 'CNT_R_001', 'CNT_R_002', 'CNT_R_003', 'CNT_R_004', 'CNT_R_005', 'CNT_R_006', 'CNT_R_007', 'CNT_R_008', 'CNT_R_009', 'CNT_R_010', 'CNT_R_011', 'CNT_R_012', 'CNT_R_013', 'CNT_R_014', 'CNT_AI_001', 'CNT_AI_002', 'CNT_AI_003', 'CNT_AI_004', 'CNS_R_001', 'CNS_R_002', 'CNS_R_003', 'CNS_R_004', 'CNS_R_010', 'CNS_R_011', 'CNS_R_012', 'CNS_R_013', 'CNS_R_014', 'CNS_R_020', 'CNS_R_030', 'CNS_R_040', 'CNS_R_050', 'CNS_R_060', 'CNS_AI_001', 'CNS_AI_002', 'CNS_AI_003', 'CNS_AI_004', 'TBL_R_001', 'TBL_R_002', 'TBL_R_003', 'TBL_R_004', 'TBL_R_005', 'TBL_R_006', 'TBL_R_007', 'TBL_R_008', 'TBL_R_009', 'TBL_R_010', 'TBL_R_011', 'TBL_R_012', 'TBL_AI_001', 'TBL_AI_002', 'TBL_AI_003', 'TBL_AI_004', 'FOR_R_101', 'FOR_R_102', 'FOR_R_103', 'FOR_R_104', 'FOR_R_105', 'FOR_R_106', 'FOR_R_201', 'FOR_R_301', 'FOR_R_302', 'FOR_R_401', 'FOR_R_402', 'FOR_R_999', 'FOR_AI_001', 'FOR_AI_002', 'FOR_AI_003', 'FOR_AI_004', 'BIZ_R_001', 'BIZ_R_002', 'BIZ_R_003', 'BIZ_R_004', 'BIZ_R_005', 'BIZ_R_006', 'BIZ_R_007', 'BIZ_R_008', 'BIZ_R_009', 'BIZ_R_010', 'BIZ_R_011', 'BIZ_R_012', 'BIZ_AI_001', 'BIZ_AI_002', 'BIZ_AI_003', 'BIZ_AI_004', 'OTH_R_001', 'OTH_R_002', 'OTH_R_003', 'OTH_R_004', 'OTH_R_005', 'OTH_R_006', 'OTH_R_007', 'OTH_R_008', 'OTH_R_009', 'OTH_R_010', 'OTH_R_011', 'OTH_R_012', 'OTH_AI_001', 'OTH_AI_002', 'OTH_AI_003', 'OTH_AI_004');

INSERT INTO sws.review_checkpoint (code, name, category, target_outline_prefix, prompt_template, rule_config_json, enabled, order_index)
VALUES
  ('FMT_R_001', '封面要素齐全（项目名称/建设单位/编制单位/日期）', 'RULE', NULL, NULL, '{"only_checks": ["cover_required_elements"], "required_elements": ["项目名称", "建设单位", "编制单位", "版本日期"], "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1000),
  ('FMT_R_002', '目录存在', 'RULE', NULL, NULL, '{"only_checks": ["toc_present"], "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1001),
  ('FMT_R_003', '章节编号连续性与不跳级', 'RULE', NULL, NULL, '{"only_checks": ["heading_numbering"], "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1002),
  ('FMT_R_004', '图编号连续且不重复', 'RULE', NULL, NULL, '{"only_checks": ["figure_numbering"], "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1003),
  ('FMT_R_005', '表编号连续且不重复', 'RULE', NULL, NULL, '{"only_checks": ["table_numbering"], "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1004),
  ('FMT_R_006', '表题（caption）缺失检查', 'RULE', NULL, NULL, '{"only_checks": ["table_caption_present"], "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1005),
  ('FMT_R_007', '图题（caption）缺失检查', 'RULE', NULL, NULL, '{"only_checks": ["figure_caption_present"], "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1006),
  ('FMT_R_008', '表格必须被正文引用', 'RULE', NULL, NULL, '{"only_checks": ["table_referenced"], "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1007),
  ('FMT_R_009', '图件必须被正文引用', 'RULE', NULL, NULL, '{"only_checks": ["figure_referenced"], "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1008),
  ('FMT_R_010', '单位/符号写法统一（hm²、m³、万元、%）', 'RULE', NULL, NULL, '{"only_checks": ["unit_symbol_consistency"], "unit_alias": {"hm2": "hm²", "公顷": "hm²", "m3": "m³", "立方米": "m³", "万元": "万元", "元": "元"}, "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1009),
  ('FMT_R_011', '全角/半角与标点规范（提示级）', 'RULE', NULL, NULL, '{"only_checks": ["typography_normalization"], "severity": "S4", "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1010),
  ('FMT_R_012', '表格单位列/表头单位缺失（提示级）', 'RULE', NULL, NULL, '{"only_checks": ["table_unit_column_present"], "severity": "S3", "review_category": "FORMAT", "executor": "format_review"}'::jsonb, true, 1011),
  ('FMT_AI_001', '印制格式合规性（页眉页脚/字体字号/行距/题注位置）', 'AI', NULL, '请对照《技术文件编写和印制格式规定》（办水保〔2018〕135号）检查：页眉页脚、字体字号、行距、段前段后、题注、页码、装订等是否符合，并输出可定位的问题。', '{"kb_keywords": "办水保 2018 135 印制 格式 页眉 页脚 字体 字号 行距 题注 页码", "top_k": 6, "max_context_length": 12000, "review_category": "FORMAT"}'::jsonb, false, 1100),
  ('FMT_AI_002', '目录与正文标题一致性（语义层级/缺失/重复）', 'AI', NULL, '检查目录条目与正文标题是否一致：是否存在目录有但正文无、正文有但目录无、层级错乱、重复标题等问题，并给出证据块。', '{"kb_keywords": "目录 编制格式 标题 层级", "top_k": 5, "max_context_length": 12000, "review_category": "FORMAT"}'::jsonb, false, 1101),
  ('FMT_AI_003', '图表题注规范性（题注内容是否完整、编号命名是否符合习惯）', 'AI', NULL, '检查图表题注是否符合规范：题注是否包含编号与名称、命名是否清晰、是否存在“如下表/下图”但无法定位的引用。', '{"kb_keywords": "图 表 题注 编号 引用", "top_k": 5, "max_context_length": 12000, "review_category": "FORMAT"}'::jsonb, false, 1102),
  ('FMT_AI_004', '计量单位与数值表达（文本语义层面）', 'AI', NULL, '检查文中数值与单位表达是否规范：同一指标是否混用单位、是否存在单位缺失、表达歧义（如“万m3”）等，输出可定位问题。', '{"kb_keywords": "计量单位 表达 规范 hm² m³ 万元", "top_k": 5, "max_context_length": 12000, "review_category": "FORMAT"}'::jsonb, false, 1103),
  ('CNT_R_001', '必备章节齐全（大纲清单）', 'RULE', NULL, NULL, '{"only_checks": ["required_sections"], "required_sections": {"综合说明": ["综合说明", "概述", "总则"], "项目概况": ["项目概况", "工程概况"], "项目区概况": ["项目区概况", "区域概况"], "水土流失预测": ["水土流失预测", "预测"], "防治措施": ["防治措施", "水土保持措施"], "监测": ["监测", "水土保持监测"], "投资": ["投资", "概算", "估算"], "管理": ["管理", "组织管理", "实施管理"]}, "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2000),
  ('CNT_R_002', '项目概况要素齐备（地点/规模/工期/组成）', 'RULE', NULL, NULL, '{"only_checks": ["overview_required_elements"], "required_elements": ["建设地点", "建设规模", "建设内容", "工期"], "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2001),
  ('CNT_R_003', '防治责任范围描述与分区齐全', 'RULE', NULL, NULL, '{"only_checks": ["responsibility_area_elements"], "required_elements": ["防治责任范围", "防治分区", "面积"], "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2002),
  ('CNT_R_004', '扰动/损毁类型与面积表述齐全', 'RULE', NULL, NULL, '{"only_checks": ["disturbance_elements"], "required_elements": ["扰动", "占地", "损毁", "面积"], "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2003),
  ('CNT_R_005', '水土流失预测章节存在且包含结果（表/结论句）', 'RULE', NULL, NULL, '{"only_checks": ["prediction_present"], "required_phrases": ["预测", "侵蚀量", "水土流失量"], "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2004),
  ('CNT_R_006', '防治措施体系齐全（工程/植物/临时）', 'RULE', NULL, NULL, '{"only_checks": ["measures_system_present"], "required_sections": {"工程措施": ["工程措施", "拦挡", "排水", "护坡", "沉沙"], "植物措施": ["植物措施", "绿化", "复绿", "植被恢复"], "临时措施": ["临时措施", "临时防护", "覆盖", "临时排水"]}, "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2005),
  ('CNT_R_007', '监测方案齐全（频次/方法/布点/责任）', 'RULE', NULL, NULL, '{"only_checks": ["monitoring_present"], "required_phrases": ["监测", "频次", "布点", "方法"], "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2006),
  ('CNT_R_008', '投资估算/概算章节齐全（工程量/单价/合计）', 'RULE', NULL, NULL, '{"only_checks": ["investment_present"], "required_phrases": ["工程量", "单价", "合计", "万元"], "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2007),
  ('CNT_R_009', '实施进度与措施安排齐全', 'RULE', NULL, NULL, '{"only_checks": ["schedule_present"], "required_phrases": ["进度", "安排", "施工期", "恢复期"], "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2008),
  ('CNT_R_010', '组织管理与责任分工齐全', 'RULE', NULL, NULL, '{"only_checks": ["management_present"], "required_phrases": ["组织", "责任", "管理", "落实"], "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2009),
  ('CNT_R_011', '触发：有弃渣/弃方/外运→必须有弃渣论证与防护', 'RULE', NULL, NULL, '{"only_checks": ["trigger_requirements"], "trigger_requirements": {"弃渣": {"keywords": ["弃渣", "弃方", "弃土", "外运"], "required_sections": ["弃渣场", "弃渣论证", "弃方处理"], "required_measures": ["拦挡", "覆盖", "排水", "沉沙"]}}, "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2010),
  ('CNT_R_012', '触发：有临时用地→必须有临时防护与恢复', 'RULE', NULL, NULL, '{"only_checks": ["trigger_requirements"], "trigger_requirements": {"临时用地": {"keywords": ["临时用地", "临时占地"], "required_sections": ["临时防护", "临时用地恢复"], "required_measures": ["覆盖", "排水", "围挡"]}}, "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2011),
  ('CNT_R_013', '触发：有消纳场/专门存放地→必须有选址禁限区论证', 'RULE', NULL, NULL, '{"only_checks": ["trigger_requirements"], "trigger_requirements": {"消纳场": {"keywords": ["消纳场", "专门存放地"], "required_sections": ["选址论证", "禁限区符合性论证"], "required_phrases": ["禁限区", "符合性", "论证"]}}, "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2012),
  ('CNT_R_014', '触发：临水/河道/水库施工→必须有防治措施（沉沙/截排水）', 'RULE', NULL, NULL, '{"only_checks": ["trigger_requirements"], "trigger_requirements": {"临水施工": {"keywords": ["河道", "水库", "溪流", "排水口", "临水"], "required_measures": ["沉沙", "截排水", "防护"], "required_sections": ["防治措施", "水环境"]}}, "review_category": "CONTENT", "executor": "content_review"}'::jsonb, true, 2013),
  ('CNT_AI_001', '论证充分性：防治分区与措施配置是否闭环', 'AI', '', '检查防治分区与措施配置是否闭环：每个分区是否明确扰动类型/风险点/对应措施/工程量或布置；若缺失请列出分区与缺失点。', '{"kb_keywords": "水土保持方案 技术审查要点 分区 措施 配置", "top_k": 6, "max_context_length": 12000, "review_category": "CONTENT"}'::jsonb, false, 2100),
  ('CNT_AI_002', '土地利用现状分类用语规范性（GBT21010）', 'AI', NULL, '对照《土地利用现状分类》(GB/T 21010-2017)，检查文中地类名称是否规范、是否混用或自造分类；输出不规范用语及建议替换分类。', '{"kb_keywords": "GB/T 21010-2017 土地利用 现状 分类", "top_k": 6, "max_context_length": 12000, "review_category": "CONTENT"}'::jsonb, false, 2101),
  ('CNT_AI_003', '预测参数来源与合理性（侵蚀模数/扰动强度/时段）', 'AI', '', '检查预测章节中关键参数（侵蚀模数、扰动强度、时段划分等）是否给出处或依据；若缺失，列出参数项与证据块。', '{"kb_keywords": "GB 50433-2018 预测 侵蚀模数 参数 依据", "top_k": 6, "max_context_length": 12000, "review_category": "CONTENT"}'::jsonb, false, 2102),
  ('CNT_AI_004', '投资估算依据与编制口径（是否引用相应编规）', 'AI', NULL, '检查投资估算/概算章节是否明确编制依据、费用组成口径、取费标准；对照相关编制规定指出缺失项。', '{"kb_keywords": "估算 编制规定 水土保持 工程 费用 取费", "top_k": 6, "max_context_length": 12000, "review_category": "CONTENT"}'::jsonb, false, 2103),
  ('CNS_R_001', '项目名称多处表述一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.0, "fact_key_allowlist": ["项目名称"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3000),
  ('CNS_R_002', '建设单位多处表述一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.0, "fact_key_allowlist": ["建设单位"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3001),
  ('CNS_R_003', '建设地点多处表述一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.0, "fact_key_allowlist": ["建设地点"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3002),
  ('CNS_R_004', '项目代码/编号一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.0, "fact_key_allowlist": ["项目代码"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3003),
  ('CNS_R_010', '总占地面积一致（跨章节/表格）', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.01, "fact_key_allowlist": ["总占地面积"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3010),
  ('CNS_R_011', '永久占地面积一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.01, "fact_key_allowlist": ["永久占地"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3011),
  ('CNS_R_012', '临时占地面积一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.01, "fact_key_allowlist": ["临时占地"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3012),
  ('CNS_R_013', '扰动面积一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.01, "fact_key_allowlist": ["扰动面积"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3013),
  ('CNS_R_014', '防治责任范围面积一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.01, "fact_key_allowlist": ["防治责任范围面积"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3014),
  ('CNS_R_020', '土石方挖/填/借/弃/外运量一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.1, "fact_key_allowlist": ["挖方", "填方", "借方", "弃方", "外运量"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3020),
  ('CNS_R_030', '工期起止与设计水平年一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 0.0, "fact_key_allowlist": ["施工期起", "施工期止", "设计水平年"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3030),
  ('CNS_R_040', '静态投资/水保投资一致', 'RULE', NULL, NULL, '{"only_checks": ["fact_consistency"], "tolerance": 1.0, "fact_key_allowlist": ["静态投资", "水土保持投资"], "review_category": "CONSISTENCY", "executor": "consistency_review"}'::jsonb, true, 3040),
  ('CNS_R_050', '同一表同列单位混用（亩/公顷/m²等）', 'RULE', NULL, NULL, '{"only_checks": ["table_unit_inconsistent"], "review_category": "CONSISTENCY", "executor": "unit_inconsistent"}'::jsonb, true, 3050),
  ('CNS_R_060', '关键字段（占地面积）启发式一致性（旧规则兜底）', 'RULE', NULL, NULL, '{"note": "旧规则，建议用doc_fact一致性替代", "review_category": "CONSISTENCY", "executor": "key_field_inconsistent"}'::jsonb, false, 3060),
  ('CNS_AI_001', '同一指标口径一致性（是否含临时/是否含弃方外运等）', 'AI', NULL, '检查文中关键指标是否存在口径不一致：例如占地面积是否含临时用地、弃方量是否含外运、投资是否含监测等。给出疑似不一致的证据块与建议统一口径。', '{"kb_keywords": "水土保持 方案 审查 要点 口径 一致性", "top_k": 6, "max_context_length": 12000, "review_category": "CONSISTENCY"}'::jsonb, false, 3100),
  ('CNS_AI_002', '表述一致性：同一地类/措施名称跨章节是否混用或矛盾', 'AI', NULL, '检查同一地类、措施名称、分区名称在不同章节是否存在混用、矛盾或前后不一致；输出证据与建议统一名称。', '{"kb_keywords": "术语 统一 分区 措施 名称", "top_k": 5, "max_context_length": 12000, "review_category": "CONSISTENCY"}'::jsonb, false, 3101),
  ('CNS_AI_003', '结论与数据一致性：结论句是否与表格结果矛盾', 'AI', NULL, '检查结论性表述（如“总占地xx”“预测流失量xx”）是否与表格或汇总数据矛盾，输出证据块与建议修改。', '{"kb_keywords": "结论 与 表格 数据 一致", "top_k": 5, "max_context_length": 12000, "review_category": "CONSISTENCY"}'::jsonb, false, 3102),
  ('CNS_AI_004', '图表与正文一致性：图名/表名与正文描述是否匹配', 'AI', NULL, '检查图表名称、编号与正文描述是否匹配（如表名写“占地”但内容为“扰动”），输出证据与修订建议。', '{"kb_keywords": "图表 名称 正文 描述 匹配", "top_k": 5, "max_context_length": 12000, "review_category": "CONSISTENCY"}'::jsonb, false, 3103),
  ('TBL_R_001', '表内行合计核算（合计/小计行）', 'RULE', NULL, NULL, '{"only_checks": ["row_sums"], "tolerance": 0.01, "rounding": 2, "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, true, 4000),
  ('TBL_R_002', '表内列合计核算（合计/小计列）', 'RULE', NULL, NULL, '{"only_checks": ["col_sums"], "tolerance": 0.01, "rounding": 2, "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, true, 4001),
  ('TBL_R_003', '表内占比/百分比核算（分项/合计）', 'RULE', NULL, NULL, '{"only_checks": ["percentages"], "tolerance": 0.02, "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, true, 4002),
  ('TBL_R_004', '表内“合计=分项之和”容差较严（投资类）', 'RULE', NULL, NULL, '{"only_checks": ["row_sums", "col_sums"], "tolerance": 0.001, "rounding": 2, "table_title_keywords": ["投资", "概算", "估算", "费用"], "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, true, 4003),
  ('TBL_R_005', '表内“合计=分项之和”容差较严（面积类）', 'RULE', NULL, NULL, '{"only_checks": ["row_sums", "col_sums"], "tolerance": 0.001, "rounding": 2, "table_title_keywords": ["面积", "占地", "扰动", "责任范围"], "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, true, 4004),
  ('TBL_R_006', '表内“合计=分项之和”容差较严（土石方类）', 'RULE', NULL, NULL, '{"only_checks": ["row_sums", "col_sums"], "tolerance": 0.01, "rounding": 1, "table_title_keywords": ["挖方", "填方", "弃方", "土石方"], "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, true, 4005),
  ('TBL_R_007', '表内数值缺失（合计行/列存在但数值为空）', 'RULE', NULL, NULL, '{"only_checks": ["missing_numbers_in_sum_rows_cols"], "severity": "S2", "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, true, 4006),
  ('TBL_R_008', '表内出现负值（提示核查）', 'RULE', NULL, NULL, '{"only_checks": ["negative_values"], "severity": "S3", "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, false, 4007),
  ('TBL_R_009', '表内单位换算后再核算（hm²/亩/m²）', 'RULE', NULL, NULL, '{"only_checks": ["unit_normalize_then_sum"], "tolerance": 0.01, "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, true, 4008),
  ('TBL_R_010', '表内百分比合计应为100%（允许容差）', 'RULE', NULL, NULL, '{"only_checks": ["percent_total_100"], "tolerance": 0.5, "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, true, 4009),
  ('TBL_R_011', '表头/表尾识别规则（合计关键词可配置）', 'RULE', NULL, NULL, '{"only_checks": ["sum_keyword_tuning"], "sum_keywords": ["合计", "小计", "总计", "合计值", "合计面积", "合计金额"], "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, false, 4010),
  ('TBL_R_012', '表格重复/空表检查（无有效数值）', 'RULE', NULL, NULL, '{"only_checks": ["empty_table_or_no_numbers"], "severity": "S3", "review_category": "TABLE_CALC", "executor": "sum_mismatch"}'::jsonb, false, 4011),
  ('TBL_AI_001', '跨表汇总关系核查（分区表→汇总表）', 'AI', NULL, '检查是否存在分区明细表与汇总表，且汇总关系正确；若缺失汇总表或汇总值明显不合理，给出证据块并建议补充/修正。', '{"kb_keywords": "汇总表 分区 表内计算 合计", "top_k": 5, "max_context_length": 12000, "review_category": "TABLE_CALC"}'::jsonb, false, 4100),
  ('TBL_AI_002', '表格口径一致性（同名字段不同单位/不同含义）', 'AI', NULL, '检查表格中同名字段（如“占地面积”）是否在不同表中含义不同或单位不同导致不可比；输出问题与建议统一口径。', '{"kb_keywords": "表格 字段 口径 单位 一致", "top_k": 5, "max_context_length": 12000, "review_category": "TABLE_CALC"}'::jsonb, false, 4101),
  ('TBL_AI_003', '数值异常检测（离群：面积/投资/土石方明显过大或过小）', 'AI', NULL, '对表内核心数值做合理性检查：识别明显离群（如面积/投资/土石方数量级异常），输出证据块并建议复核。', '{"kb_keywords": "合理性 校核 数值 异常", "top_k": 5, "max_context_length": 12000, "review_category": "TABLE_CALC"}'::jsonb, false, 4102),
  ('TBL_AI_004', '表格标题与内容一致性（标题说A内容是B）', 'AI', NULL, '检查表格标题/编号与内容是否一致（如标题为“扰动面积”但内容为“占地面积”），输出证据与建议更正标题或内容。', '{"kb_keywords": "表格 标题 内容 一致性", "top_k": 5, "max_context_length": 12000, "review_category": "TABLE_CALC"}'::jsonb, false, 4103),
  ('FOR_R_101', '六项指标复算：治理度', 'RULE', NULL, NULL, '{"only_checks": ["formula"], "only_formulas": "RULE", "only_indicators": ["治理度"], "tolerance": 0.01, "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, true, 5000),
  ('FOR_R_102', '六项指标复算：控制比', 'RULE', NULL, NULL, '{"only_checks": ["formula"], "only_formulas": "RULE", "only_indicators": ["控制比"], "tolerance": 0.01, "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, true, 5001),
  ('FOR_R_103', '六项指标复算：渣土防护率', 'RULE', NULL, NULL, '{"only_checks": ["formula"], "only_formulas": "RULE", "only_indicators": ["渣土防护率"], "tolerance": 0.01, "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, true, 5002),
  ('FOR_R_104', '六项指标复算：表土保护率', 'RULE', NULL, NULL, '{"only_checks": ["formula"], "only_formulas": "RULE", "only_indicators": ["表土保护率"], "tolerance": 0.01, "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, true, 5003),
  ('FOR_R_105', '六项指标复算：恢复率', 'RULE', NULL, NULL, '{"only_checks": ["formula"], "only_formulas": "RULE", "only_indicators": ["恢复率"], "tolerance": 0.01, "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, true, 5004),
  ('FOR_R_106', '六项指标复算：覆盖率', 'RULE', NULL, NULL, '{"only_checks": ["formula"], "only_formulas": "RULE", "only_indicators": ["覆盖率"], "tolerance": 0.01, "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, true, 5005),
  ('FOR_R_201', '土石方平衡复算（挖方=填方+弃方+外运）', 'RULE', NULL, NULL, '{"only_checks": ["balance"], "only_balance": ["土石方平衡"], "tolerance": 0.01, "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, true, 5010),
  ('FOR_R_301', '预测计算复算：侵蚀量=分区面积×时段×侵蚀模数', 'RULE', NULL, NULL, '{"only_checks": ["prediction"], "only_prediction": ["侵蚀量"], "tolerance": 0.02, "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, true, 5020),
  ('FOR_R_302', '预测计算：分区侵蚀量汇总=总侵蚀量（如有汇总表）', 'RULE', NULL, NULL, '{"only_checks": ["prediction_sum"], "tolerance": 0.02, "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, false, 5021),
  ('FOR_R_401', '费用/投资公式复算（直接费+间接费+预备费…）', 'RULE', NULL, NULL, '{"only_checks": ["investment_formula"], "note": "需要你补充费用项抽取与公式", "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, false, 5030),
  ('FOR_R_402', '单位换算复算（亩↔hm²↔m²，万↔元）', 'RULE', NULL, NULL, '{"only_checks": ["unit_conversion"], "note": "需要你在fact_service记录单位并统一", "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, false, 5031),
  ('FOR_R_999', '公式总控：执行全部公式（回归用）', 'RULE', NULL, NULL, '{"only_checks": ["all"], "note": "用于回归测试", "review_category": "FORMULA_CALC", "executor": "formula_calculation"}'::jsonb, false, 5099),
  ('FOR_AI_001', '变量缺失诊断：六项指标分子/分母缺失或口径不清', 'AI', NULL, '若六项指标无法复算，找出缺失的变量（分子/分母）在文中是否出现、是否有单位；输出缺失项及应补充的位置建议。', '{"kb_keywords": "六项指标 治理度 控制比 渣土防护率 表土保护率 恢复率 覆盖率 复算", "top_k": 6, "max_context_length": 12000, "review_category": "FORMULA_CALC"}'::jsonb, false, 5100),
  ('FOR_AI_002', '预测参数合理性：侵蚀模数与时段划分是否有依据', 'AI', NULL, '检查预测计算中侵蚀模数、时段划分、分区面积来源是否给出依据或引用标准；输出缺失项与证据块。', '{"kb_keywords": "侵蚀模数 时段 分区面积 依据 GB 50433-2018", "top_k": 6, "max_context_length": 12000, "review_category": "FORMULA_CALC"}'::jsonb, false, 5101),
  ('FOR_AI_003', '平衡关系合理性：土石方平衡口径（损耗/借方/调运）说明', 'AI', NULL, '检查土石方平衡是否说明口径：是否考虑损耗、借方、调运、外运去向；若公式/口径不清，输出证据块并建议补充。', '{"kb_keywords": "土石方 平衡 口径 损耗 借方 外运", "top_k": 5, "max_context_length": 12000, "review_category": "FORMULA_CALC"}'::jsonb, false, 5102),
  ('FOR_AI_004', '费用组成合理性：水保投资费用项缺失/重复/口径不清', 'AI', NULL, '检查水土保持投资费用组成是否完整且口径清晰：是否存在缺项、重复计取、取费依据缺失；输出证据块并建议修订。', '{"kb_keywords": "水土保持 投资 费用 组成 取费 依据", "top_k": 6, "max_context_length": 12000, "review_category": "FORMULA_CALC"}'::jsonb, false, 5103),
  ('BIZ_R_001', '禁止性条款：消纳场不得位于禁限区（生态红线/水源/核心区）', 'RULE', NULL, NULL, '{"only_checks": ["prohibition_rules"], "prohibition_rules": {"消纳场禁限区": {"trigger_keywords": ["消纳场", "专门存放地"], "prohibited_keywords": ["水源保护区", "生态红线", "自然保护区核心区"], "message": "消纳场不得设置在禁限区内"}}, "review_category": "BIZ_LOGIC", "executor": "business_logic_review"}'::jsonb, true, 6000),
  ('BIZ_R_002', '禁止性条款：弃渣场/弃土场不得位于禁限区', 'RULE', NULL, NULL, '{"only_checks": ["prohibition_rules"], "prohibition_rules": {"弃渣场禁限区": {"trigger_keywords": ["弃渣场", "弃土场", "弃方场"], "prohibited_keywords": ["水源保护区", "生态红线", "自然保护区核心区"], "message": "弃渣场不得设置在禁限区内"}}, "review_category": "BIZ_LOGIC", "executor": "business_logic_review"}'::jsonb, true, 6001),
  ('BIZ_R_003', '措施-风险闭环：有临水施工→沉沙/截排水措施必须出现（规则）', 'RULE', NULL, NULL, '{"only_checks": ["trigger_requirements"], "trigger_requirements": {"临水施工": {"keywords": ["河道", "水库", "溪流", "临水"], "required_measures": ["沉沙", "截排水", "挡土", "围堰"], "required_sections": ["防治措施"]}}, "note": "建议从content_review拆出专用biz executor", "review_category": "BIZ_LOGIC", "executor": "content_review"}'::jsonb, false, 6002),
  ('BIZ_R_004', '数据关系：防治责任范围面积≥扰动面积（规则）', 'RULE', NULL, NULL, '{"only_checks": ["fact_relation"], "relation": "防治责任范围面积 >= 扰动面积", "fact_keys": ["防治责任范围面积", "扰动面积"], "note": "需要你在consistency_review支持relation", "review_category": "BIZ_LOGIC", "executor": "consistency_review"}'::jsonb, false, 6003),
  ('BIZ_R_005', '数据关系：永久+临时=总占地（规则）', 'RULE', NULL, NULL, '{"only_checks": ["fact_relation"], "relation": "永久占地 + 临时占地 = 总占地面积", "fact_keys": ["永久占地", "临时占地", "总占地面积"], "review_category": "BIZ_LOGIC", "executor": "consistency_review"}'::jsonb, false, 6004),
  ('BIZ_R_006', '数据关系：弃方量≥外运量（如外运为弃方去向）', 'RULE', NULL, NULL, '{"only_checks": ["fact_relation"], "relation": "弃方 >= 外运量", "fact_keys": ["弃方", "外运量"], "review_category": "BIZ_LOGIC", "executor": "consistency_review"}'::jsonb, false, 6005),
  ('BIZ_R_007', '触发：弃渣/外运→必须明确去向与运输组织（文本）', 'RULE', NULL, NULL, '{"only_checks": ["required_elements"], "required_phrases": ["去向", "运输", "路线", "消纳"], "trigger_keywords": ["弃渣", "外运"], "review_category": "BIZ_LOGIC", "executor": "content_review"}'::jsonb, true, 6006),
  ('BIZ_R_008', '触发：表土剥离→必须有表土堆存与保护措施（文本）', 'RULE', NULL, NULL, '{"only_checks": ["trigger_requirements"], "trigger_requirements": {"表土剥离": {"keywords": ["表土剥离", "剥离表土"], "required_sections": ["表土保护", "表土堆存"], "required_measures": ["覆盖", "围挡", "排水", "防冲刷"]}}, "review_category": "BIZ_LOGIC", "executor": "content_review"}'::jsonb, false, 6007),
  ('BIZ_R_009', '触发：边坡/高填方→必须有护坡与排水措施（文本）', 'RULE', NULL, NULL, '{"only_checks": ["trigger_requirements"], "trigger_requirements": {"边坡高填方": {"keywords": ["边坡", "高填方", "高挖方"], "required_measures": ["护坡", "排水", "截水沟", "跌水"], "required_sections": ["工程措施"]}}, "review_category": "BIZ_LOGIC", "executor": "content_review"}'::jsonb, false, 6008),
  ('BIZ_R_010', '制度合规：方案管理要求（报批/变更/验收）要素齐全', 'RULE', NULL, NULL, '{"only_checks": ["management_present"], "required_phrases": ["报批", "变更", "验收", "监测", "档案"], "review_category": "BIZ_LOGIC", "executor": "content_review"}'::jsonb, true, 6009),
  ('BIZ_R_011', '地方性要求：广东省水土保持条例提及的禁限行为提示（AI优先）', 'RULE', NULL, NULL, '{"note": "建议后续用AI+知识库实现条款比对", "review_category": "BIZ_LOGIC", "executor": "business_logic_review"}'::jsonb, false, 6010),
  ('BIZ_R_012', '审查要点：水保监〔2020〕63号关注点覆盖（AI优先）', 'RULE', NULL, NULL, '{"note": "建议后续用AI+知识库实现审查要点逐条核对", "review_category": "BIZ_LOGIC", "executor": "business_logic_review"}'::jsonb, false, 6011),
  ('BIZ_AI_001', '条款匹配：对照水保监〔2020〕63号审查要点逐条核对缺失项', 'AI', NULL, '请对照《生产建设项目水土保持方案技术审查要点》（水保监〔2020〕63号），逐条核对本方案是否覆盖关键审查点；对缺失或论证不足项输出问题与建议。', '{"kb_keywords": "水保监 2020 63 审查要点", "top_k": 8, "max_context_length": 14000, "review_category": "BIZ_LOGIC"}'::jsonb, false, 6100),
  ('BIZ_AI_002', '条款匹配：对照广东省水土保持条例，检查是否涉及禁限事项与合规性说明', 'AI', NULL, '请对照《广东省水土保持条例》，检查方案中涉及弃渣、消纳场、临时用地等事项是否有合规性说明（禁限区、审批/监管要求等）；输出缺失项与建议补充内容。', '{"kb_keywords": "广东省 水土保持 条例 禁限 弃渣 消纳 临时用地", "top_k": 8, "max_context_length": 14000, "review_category": "BIZ_LOGIC"}'::jsonb, false, 6101),
  ('BIZ_AI_003', '措施合理性：工程/植物/临时措施配置是否与扰动类型匹配', 'AI', NULL, '检查各扰动类型（开挖、填筑、道路、临时堆土等）对应措施是否合理匹配，是否存在明显缺项/错配；输出证据与建议调整。', '{"kb_keywords": "水土保持 措施 配置 合理性 工程 植物 临时", "top_k": 6, "max_context_length": 14000, "review_category": "BIZ_LOGIC"}'::jsonb, false, 6102),
  ('BIZ_AI_004', '投资合理性：措施工程量×单价×取费口径是否与编规一致（抽样核查）', 'AI', NULL, '抽样检查投资估算：措施工程量、单价、取费依据是否符合相关编制规定；找出明显缺项或口径不清并给出建议。', '{"kb_keywords": "水土保持 工程 概算 估算 编制规定 取费", "top_k": 8, "max_context_length": 14000, "review_category": "BIZ_LOGIC"}'::jsonb, false, 6103),
  ('OTH_R_001', '系统检查：doc_outline_node 不能为空且层级合法', 'RULE', NULL, NULL, '{"only_checks": ["outline_not_empty", "outline_level_valid"], "min_nodes": 10, "note": "需要新增system_check执行器", "review_category": "OTHER", "executor": "system_check"}'::jsonb, false, 7000),
  ('OTH_R_002', '系统检查：doc_block 不能为空且order_index连续（解析质量）', 'RULE', NULL, NULL, '{"only_checks": ["blocks_not_empty", "order_index_monotonic"], "min_blocks": 200, "review_category": "OTHER", "executor": "system_check"}'::jsonb, false, 7001),
  ('OTH_R_003', '系统检查：表格解析质量（doc_table_cell数量/空表比例）', 'RULE', NULL, NULL, '{"only_checks": ["table_parse_quality"], "min_cells_per_table": 4, "max_empty_table_ratio": 0.2, "review_category": "OTHER", "executor": "system_check"}'::jsonb, false, 7002),
  ('OTH_R_004', '系统检查：图片/图件引用但未解析到资源（如doc_image缺失）', 'RULE', NULL, NULL, '{"only_checks": ["image_ref_but_missing_asset"], "note": "需要doc_image表或资源表", "review_category": "OTHER", "executor": "system_check"}'::jsonb, false, 7003),
  ('OTH_R_005', '引用标准/规范列表存在且包含关键标准编号', 'RULE', NULL, NULL, '{"only_checks": ["required_elements"], "required_phrases": ["GB 50433", "GB/T 21010", "GB 51018", "水保监", "水利部令", "广东省水土保持条例"], "review_category": "OTHER", "executor": "content_review"}'::jsonb, true, 7004),
  ('OTH_R_006', '附件清单存在（附表/附图/附件）', 'RULE', NULL, NULL, '{"only_checks": ["required_elements"], "required_phrases": ["附件", "附表", "附图"], "review_category": "OTHER", "executor": "content_review"}'::jsonb, true, 7005),
  ('OTH_R_007', '结论与建议章节存在（用于审查结论）', 'RULE', NULL, NULL, '{"required_sections": ["结论", "建议"], "note": "当前missing_section内置清单，如需该规则需改造missing_section支持配置", "review_category": "OTHER", "executor": "missing_section"}'::jsonb, true, 7006),
  ('OTH_R_008', '重要图件存在（位置图/总平面/防治分区图/措施布置图）', 'RULE', NULL, NULL, '{"only_checks": ["required_elements"], "required_phrases": ["位置图", "总平面", "防治分区图", "措施布置图"], "review_category": "OTHER", "executor": "content_review"}'::jsonb, false, 7007),
  ('OTH_R_009', '关键表格存在（占地/扰动/土石方/投资）', 'RULE', NULL, NULL, '{"only_checks": ["required_elements"], "required_phrases": ["占地", "扰动", "土石方", "投资", "概算", "估算"], "review_category": "OTHER", "executor": "content_review"}'::jsonb, false, 7008),
  ('OTH_R_010', '导出审查报告字段完整（issue->报告）', 'RULE', NULL, NULL, '{"only_checks": ["report_export_fields"], "note": "需要在导出模块实现", "review_category": "OTHER", "executor": "system_check"}'::jsonb, false, 7009),
  ('OTH_R_011', '问题证据有效性（evidence_block_ids存在且能定位）', 'RULE', NULL, NULL, '{"only_checks": ["issue_evidence_valid"], "note": "需要系统级检查", "review_category": "OTHER", "executor": "system_check"}'::jsonb, false, 7010),
  ('OTH_R_012', '重复问题抑制（同类同位置重复）', 'RULE', NULL, NULL, '{"only_checks": ["dedup_issues"], "note": "建议在insert_issue前做去重", "review_category": "OTHER", "executor": "system_check"}'::jsonb, false, 7011),
  ('OTH_AI_001', '引用完整性：规范/编规引用是否过期或缺失关键版本号', 'AI', NULL, '检查引用标准/规范/编规是否给出完整编号与年份版本，是否存在过期引用或缺失版本号；输出证据块与建议修订。', '{"kb_keywords": "引用 标准 编规 版本号 年份", "top_k": 6, "max_context_length": 12000, "review_category": "OTHER"}'::jsonb, false, 7100),
  ('OTH_AI_002', '可读性与歧义：关键结论句是否存在歧义/模糊表述', 'AI', NULL, '检查关键结论/建议是否存在歧义或不可操作的模糊表述（如“加强管理”未给措施），输出证据块并建议具体化。', '{"kb_keywords": "结论 建议 表述 具体化", "top_k": 5, "max_context_length": 12000, "review_category": "OTHER"}'::jsonb, false, 7101),
  ('OTH_AI_003', '版式与内容风险：复制粘贴痕迹/前后矛盾/未替换占位符', 'AI', NULL, '检查是否存在复制粘贴痕迹、未替换占位符（如“XXX项目”）、明显前后矛盾；输出证据块并建议修订。', '{"kb_keywords": "占位符 XXX 项目 复制 粘贴 矛盾", "top_k": 5, "max_context_length": 12000, "review_category": "OTHER"}'::jsonb, false, 7102),
  ('OTH_AI_004', '审查结论生成：基于发现问题给出结构化审查结论草案', 'AI', NULL, '根据已发现的问题，生成结构化审查结论草案：重大问题/一般问题/建议修改点/可通过条件，并保持可追溯证据引用。', '{"kb_keywords": "审查 结论 草案 重大问题 一般问题", "top_k": 6, "max_context_length": 12000, "review_category": "OTHER"}'::jsonb, false, 7103);

COMMIT;
