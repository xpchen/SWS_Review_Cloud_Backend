# 快速参考：审查任务诊断和直接执行

## 🚀 快速开始

### 1. 诊断 Celery Worker 状态
```bash
python 测试审查.py --diagnose
```

### 2. 直接执行审查（推荐用于测试）
```bash
# 规则审查
python 测试审查.py 10 RULE --direct --show-results

# AI审查
python 测试审查.py 10 AI --direct --show-results

# 混合审查
python 测试审查.py 10 MIXED --direct --show-results
```

### 3. 异步执行审查（需要 Celery Worker）
```bash
# 先启动 Worker
celery -A app.worker.app worker --pool=solo --loglevel=info

# 然后触发审查
python 测试审查.py 10 RULE --show-results
```

## 📋 常用命令

| 命令 | 说明 |
|------|------|
| `python 测试审查.py --diagnose` | 诊断 Celery Worker 状态 |
| `python 测试审查.py 10 RULE --direct` | 直接执行规则审查（同步） |
| `python 测试审查.py 10 AI --direct --show-results` | 直接执行AI审查并显示结果 |
| `python 测试审查.py 10 RULE` | 异步执行规则审查（需要Worker） |

## 🔧 问题排查

### 任务一直 PENDING？
1. 运行诊断：`python 测试审查.py --diagnose`
2. 如果 Worker 不可用，使用 `--direct` 参数
3. 或启动 Worker：`celery -A app.worker.app worker --pool=solo`

### 需要立即看到结果？
使用 `--direct` 参数，同步执行，立即返回结果。

## 📖 详细文档

查看 `审查任务诊断与直接执行说明.md` 获取完整文档。
