# 调试 /api/auth/login 返回 404 的问题

## 已验证的信息
✅ 路由已成功注册：`POST /api/auth/login`
✅ OpenAPI 文档中包含该路由
✅ 服务正在运行在 `http://0.0.0.0:8000`

## 可能的原因和解决方案

### 1. 检查请求方法
**问题**：使用了错误的 HTTP 方法（GET 而不是 POST）

**解决方案**：
- ✅ 使用 **POST** 方法
- ❌ 不要使用 GET、PUT、DELETE 等方法

### 2. 检查 URL 路径
**问题**：URL 路径不正确

**正确的 URL**：
```
POST http://localhost:8000/api/auth/login
```
或
```
POST http://0.0.0.0:8000/api/auth/login
```

**常见错误**：
- ❌ `http://localhost:8000/api/auth/login/` （末尾多了斜杠）
- ❌ `http://localhost:8000/auth/login` （缺少 `/api` 前缀）
- ❌ `http://localhost:8000/api/login` （缺少 `/auth`）

### 3. 检查请求头
**问题**：缺少必要的请求头

**必需的请求头**：
```
Content-Type: application/json
```

### 4. 检查请求体
**问题**：请求体格式不正确

**正确的请求体格式（JSON）**：
```json
{
  "username": "your_username",
  "password": "your_password"
}
```

### 5. 使用 curl 测试
在命令行中运行以下命令测试：

```bash
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d "{\"username\":\"test\",\"password\":\"test\"}"
```

### 6. 使用 Postman 测试
1. **方法**：选择 `POST`
2. **URL**：`http://localhost:8000/api/auth/login`
3. **Headers**：添加 `Content-Type: application/json`
4. **Body**：选择 `raw` 和 `JSON`，然后输入：
   ```json
   {
     "username": "test",
     "password": "test"
   }
   ```

### 7. 检查 Swagger UI
访问 `http://localhost:8000/docs`，找到 `/api/auth/login` 路由，点击 "Try it out" 按钮直接测试。

### 8. 检查服务日志
如果请求到达了服务器，应该会在控制台看到日志。如果没有看到任何日志，说明请求可能没有到达服务器。

### 9. 检查防火墙/代理
- 确保防火墙没有阻止 8000 端口
- 如果有代理，确保配置正确

### 10. 验证路由是否真的可用
运行以下 Python 脚本验证：

```python
import requests

response = requests.post(
    "http://localhost:8000/api/auth/login",
    json={"username": "test", "password": "test"}
)
print(f"状态码: {response.status_code}")
print(f"响应: {response.json()}")
```

如果返回 401（未授权），说明路由存在，只是认证失败。
如果返回 404，说明路由确实不存在或路径不匹配。

## 快速检查清单
- [ ] 使用 POST 方法
- [ ] URL 是 `http://localhost:8000/api/auth/login`（无末尾斜杠）
- [ ] 设置了 `Content-Type: application/json` 请求头
- [ ] 请求体是有效的 JSON 格式
- [ ] 服务正在运行（检查控制台日志）
- [ ] 尝试访问 `http://localhost:8000/docs` 查看 Swagger UI
